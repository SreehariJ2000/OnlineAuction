
{% extends "base.html" %} 
{% load static %}
{% block style %}
<style>
  .form-group-inline {
    display: flex;
    justify-content: space-between;
  }
  .form-group-inline .form-control {
    width: 45%;
  }

  .background {
    background-image: url('{% static 'assets/img/signup.jpg' %}'); /* Replace with your image URL */
    background-size: cover;
    background-repeat: no-repeat;
    width: 100%;
    height: 700px;
    display: flex;
    justify-content: center;
    align-items: center;
}
</style>
{% endblock style %} {% block body %}

<div class="background">

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">

      





      <div class="card">
        <div class="card-header">
          <h4>Sign Up</h4>
        </div>
        <div class="card-body">
          
          {% for message in messages %}

          <div class="alert alert-{{messages.tags}}" role="alert">
            <strong>{{message}}</strong>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="Close"
            ></button>
          </div>

          {% endfor %}
          <form action="" method="POST" id="signup-form">
            {% csrf_token %}
            <!-- First Name and Last Name on the same row with spacing -->
            <div class="form-row">
                <div class="col">
                    <input type="text" class="form-control mb-3" placeholder="First Name" name="first_name" id="first_name" required />
                    <div class="text-danger" id="first_name_error"></div>
                </div>
                <div class="col">
                    <input type="text" class="form-control mb-3" placeholder="Last Name" name="last_name" id="last_name" required />
                    <div class="text-danger" id="last_name_error"></div>
                </div>
            </div>
            <!-- Email with spacing -->
            <div class="form-group">
                <input type="email" class="form-control mb-3" placeholder="Email" name="email" id="email" required />
                <div class="text-danger" id="email_error"></div>
            </div>
            <!-- Password with spacing -->
            <div class="form-group">
                <input type="password" class="form-control mb-3" placeholder="Password" name="password" id="password" required />
                <div class="text-danger" id="password_error"></div>
            </div>
            <!-- Confirm Password with spacing -->
            <div class="form-group">
                <input type="password" class="form-control mb-3" placeholder="Confirm Password" name="confirm_password" id="confirm_password" required/>
                <div class="text-danger" id="confirm_password_error"></div>
            </div>
            <!-- Sign Up Button centered -->
            <div class="text-center">
                <button type="submit" class="btn btn-primary btn-block" id="signup-button"  >
                    Sign Up
                </button>
            </div>
        </form>
          <div class="mt-3 text-center">
            Already a user? <a href="http://127.0.0.1:8000/auth_app/handlelogin/">Sign In</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</div>

{% endblock body %} {% block jsfiles %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
<!---->
<script>

  document.addEventListener("DOMContentLoaded", function () {
    var firstName = document.getElementById("first_name");
    var lastName = document.getElementById("last_name");
    var email = document.getElementById("email");
    var password = document.getElementById("password");
    var confirmPassword = document.getElementById("confirm_password");
  
    var firstNameError = document.getElementById("first_name_error");
    var lastNameError = document.getElementById("last_name_error");
    var emailError = document.getElementById("email_error");
    var passwordError = document.getElementById("password_error");
    var confirmPasswordError = document.getElementById("confirm_password_error");
  
    // Function to display error messages
    function displayErrorMessage(fieldElement, errorElement, message) {
      fieldElement.classList.add("is-invalid");
      errorElement.textContent = message;
    }
  
    // Function to clear error messages
    function clearErrorMessage(fieldElement, errorElement) {
      fieldElement.classList.remove("is-invalid");
      errorElement.textContent = "";
    }
  
    // Event listeners for real-time validation
    firstName.addEventListener("input", function () {
      clearErrorMessage(firstName, firstNameError);
      if (firstName.value.trim() === "") {
        displayErrorMessage(firstName, firstNameError, "First name cannot be empty.");
      } else if (firstName.value.includes(" ")) {
        displayErrorMessage(firstName, firstNameError, "First name cannot contain spaces.");
      } else if (!/^[A-Za-z]+$/.test(firstName.value)) {
        displayErrorMessage(firstName, firstNameError, "First name must contain only characters.");
      }
    });
  
    lastName.addEventListener("input", function () {
      clearErrorMessage(lastName, lastNameError);
      if (lastName.value.trim() === "") {
        displayErrorMessage(lastName, lastNameError, "Last name cannot be empty.");
      } else if (!/^[A-Za-z]+$/.test(lastName.value)) {
        displayErrorMessage(lastName, lastNameError, "Last name must contain only characters.");
      }
    });

    email.addEventListener("input", function () {
      clearErrorMessage(email, emailError);
      const emailRegex = /^[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.[a-zA-Z]{2,})$/;
      const emailValue = email.value.trim(); // Trimmed email value
    
      if (emailValue === "") {
        displayErrorMessage(email, emailError, "Email cannot be empty.");
      } else if (emailValue.length > 254) {
        displayErrorMessage(email, emailError, "Email address is too long.");
      } else if (!emailRegex.test(emailValue)) {
        displayErrorMessage(email, emailError, "Invalid email address. Please enter a valid email address.");
      }
    });
    
    
    
    
  
    password.addEventListener("input", function () {
      clearErrorMessage(password, passwordError);
      const isValid = /^(?=.*[A-Z])(?=.*[!@#$%^&*()_+{}\[\]:;<>,.?~\\])(?!.*\s).{8,}$/.test(password.value);
    
      if (!isValid) {
        displayErrorMessage(password, passwordError, "Password must contain uppercase, special character, at least 8 characters, and no spaces.");
      } else {
        clearErrorMessage(password, passwordError); // Clear the error message if the password is valid
      }
    });
    
    
    

   
  
    confirmPassword.addEventListener("input", function () {
      clearErrorMessage(confirmPassword, confirmPasswordError);
      if (confirmPassword.value !== password.value) {
        displayErrorMessage(confirmPassword, confirmPasswordError, "password dosenot match");
      }
    });


    function submitForm(e) {
      // Check if any error messages exist
      if (
        firstNameError.textContent ||
        lastNameError.textContent ||
        emailError.textContent ||
        passwordError.textContent ||
        confirmPasswordError.textContent
      ) {
        e.preventDefault(); // Prevent form submission if there are errors
      }
    }
  
    // Event listener for form submission
    document.getElementById("signup-form").addEventListener("submit", submitForm);
  
   
  });
  

</script>

   
  
{% endblock jsfiles %}
